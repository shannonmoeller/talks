/*! (C) WebReflection Mit Style License */
define(function(){function Q(e,t){for(var n=0,r=e.length;n<r;n++)ut(e[n],t)}function G(e){for(var t=0,n=e.length,r;t<n;t++)r=e[t],K(r,v[Z(r)])}function Y(e){return function(t){D(t)&&(ut(t,e),Q(t.querySelectorAll(m),e))}}function Z(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),r=y.call(d,t?c+t.toUpperCase():l+n);return t&&-1<r&&!et(n,t)?-1:r}function et(e,t){return-1<m.indexOf(e+'[is="'+t+'"]')}function tt(e){var t=e.currentTarget,n=e.attrChange,r=e.prevValue,s=e.newValue;t.attributeChangedCallback&&e.attrName!=="style"&&t.attributeChangedCallback(e.attrName,n===e[i]?null:r,n===e[o]?null:s)}function nt(e){var t=Y(e);return function(e){t(e.target)}}function rt(e){z&&(z=!1,e.currentTarget.removeEventListener(a,rt)),Q((e.target||document).querySelectorAll(m),e.detail===n?n:t),_&&ot()}function it(e,t){var n=this;B.call(n,e,t),W.call(n,{target:n})}function st(t,n){A(t,n),$?$.observe(t,I):(U&&(t.setAttribute=it,t[e]=V(t),t.addEventListener(f,W)),t.addEventListener(u,tt)),t.createdCallback&&(t.created=!0,t.createdCallback(),t.created=!1)}function ot(){for(var e,t=0,r=P.length;t<r;t++)e=P[t],g.contains(e)||(P.splice(t,1),ut(e,n))}function ut(e,r){var i,s=Z(e);-1<s&&(J(e,v[s]),s=0,r===t&&!e[t]?(e[n]=!1,e[t]=!0,s=1,_&&y.call(P,e)<0&&P.push(e)):r===n&&!e[n]&&(e[t]=!1,e[n]=!0,s=1),s&&(i=e[r+"Callback"])&&i.call(e))}var e="__"+REGISTER_ELEMENT+(Math.random()*1e5>>0),t="attached",n="detached",r="extends",i="ADDITION",s="MODIFICATION",o="REMOVAL",u="DOMAttrModified",a="DOMContentLoaded",f="DOMSubtreeModified",l="<",c="=",h=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,p=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],d=[],v=[],m="",g=document.documentElement,y=d.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},b=Object.prototype,w=b.hasOwnProperty,E=b.isPrototypeOf,S=Object.defineProperty,x=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,N=Object.getPrototypeOf,C=Object.setPrototypeOf,k=!!Object.__proto__,L=Object.create||function at(e){return e?(at.prototype=e,new at):this},A=C||(k?function(e,t){return e.__proto__=t,e}:T&&x?function(){function e(e,t){for(var n,r=T(t),i=0,s=r.length;i<s;i++)n=r[i],w.call(e,n)||S(e,n,x(t,n))}return function(t,n){do e(t,n);while(n=N(n));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),O=window.MutationObserver||window.WebKitMutationObserver,M=(window.HTMLElement||window.Element||window.Node).prototype,_=!E.call(M,g),D=_?function(e){return e.nodeType===1}:function(e){return E.call(M,e)},P=_&&[],H=M.cloneNode,B=M.setAttribute,j=M.removeAttribute,F=document.createElement,I=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},q=O||function(e){U=!1,g.removeEventListener(u,q)},R=!1,U=!0,z=!0,W,X,V,$,J,K;C||k?(J=function(e,t){E.call(t,e)||st(e,t)},K=st):(J=function(t,n){t[e]||(t[e]=Object(!0),st(t,n))},K=J),_?(U=!1,function(){var t=x(M,"addEventListener"),n=t.value,r=function(e){var t=new CustomEvent(u,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[o]=t.attrChange=2,j.call(this,e),this.dispatchEvent(t)},a=function(e,t){var n=this.hasAttribute(e),r=n&&this.getAttribute(e),o=new CustomEvent(u,{bubbles:!0});B.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o[s]=o.attrChange=1:o[i]=o.attrChange=0,this.dispatchEvent(o)},f=function(t){var n=t.currentTarget,r=n[e],o=t.propertyName,a;r.hasOwnProperty(o)&&(r=r[o],a=new CustomEvent(u,{bubbles:!0}),a.attrName=r.name,a.prevValue=r.value||null,a.newValue=r.value=n[o]||null,a.prevValue==null?a[i]=a.attrChange=0:a[s]=a.attrChange=1,n.dispatchEvent(a))};t.value=function(t,i,s){t===u&&this.attributeChangedCallback&&this.setAttribute!==a&&(this[e]={className:{name:"class",value:this.className}},this.setAttribute=a,this.removeAttribute=r,n.call(this,"propertychange",f)),n.call(this,t,i,s)},S(M,"addEventListener",t)}()):O||(g.addEventListener(u,q),g.setAttribute(e,1),g.removeAttribute(e),U&&(W=function(t){var n=this,r,u,a;if(n===t.target){r=n[e],n[e]=u=V(n);for(a in u){if(!(a in r))return X(0,n,a,r[a],u[a],i);if(u[a]!==r[a])return X(1,n,a,r[a],u[a],s)}for(a in r)if(!(a in u))return X(2,n,a,r[a],u[a],o)}},X=function(e,t,n,r,i,s){var o={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};o[s]=e,tt(o)},V=function(e){for(var t,n,r={},i=e.attributes,s=0,o=i.length;s<o;s++)t=i[s],n=t.name,n!=="setAttribute"&&(r[n]=t.value);return r})),document[REGISTER_ELEMENT]=function(i,s){S=i.toUpperCase(),R||(R=!0,O?($=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new O(function(r){for(var i,s,o=0,u=r.length;o<u;o++)i=r[o],i.type==="childList"?(n(i.addedNodes,e),n(i.removedNodes,t)):(s=i.target,s.attributeChangedCallback&&i.attributeName!=="style"&&s.attributeChangedCallback(i.attributeName,i.oldValue,s.getAttribute(i.attributeName)))})}(Y(t),Y(n)),$.observe(document,{childList:!0,subtree:!0})):(document.addEventListener("DOMNodeInserted",nt(t)),document.addEventListener("DOMNodeRemoved",nt(n))),document.addEventListener(a,rt),document.addEventListener("readystatechange",rt),document.createElement=function(e,t){var n=F.apply(document,arguments),r=""+e,i=y.call(d,(t?c:l)+(t||r).toUpperCase()),s=-1<i;return t&&(n.setAttribute("is",t=t.toLowerCase()),s&&(s=et(r.toUpperCase(),t))),s&&K(n,v[i]),n},M.cloneNode=function(e){var t=H.call(this,!!e),n=Z(t);return-1<n&&K(t,v[n]),e&&G(t.querySelectorAll(m)),t});if(-2<y.call(d,c+S)+y.call(d,l+S))throw new Error("A "+i+" type is already registered");if(!h.test(S)||-1<y.call(p,S))throw new Error("The type "+i+" is invalid");var o=function(){return document.createElement(g,f&&S)},u=s||b,f=w.call(u,r),g=f?s[r].toUpperCase():S,E=d.push((f?c:l)+S)-1,S;return m=m.concat(m.length?",":"",f?g+'[is="'+i.toLowerCase()+'"]':g),o.prototype=v[E]=w.call(u,"prototype")?u.prototype:L(M),Q(document.querySelectorAll(m),t),o}});